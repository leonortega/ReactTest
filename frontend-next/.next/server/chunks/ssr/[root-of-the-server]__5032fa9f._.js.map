{"version":3,"sources":["../../../../app/_lib/storage.ts","../../../../app/app/page.tsx"],"sourcesContent":["import { promises as fs } from 'fs';\nimport path from 'path';\n\nfunction getDataDir() {\n  return process.env.MP_DATA_DIR ?? path.join(process.cwd(), 'data');\n}\n\nasync function ensureDir() {\n  await fs.mkdir(getDataDir(), { recursive: true });\n}\n\nasync function ensureFile<T>(fileName: string, fallback: T) {\n  await ensureDir();\n  const filePath = path.join(getDataDir(), fileName);\n  try {\n    await fs.access(filePath);\n  } catch {\n    await fs.writeFile(filePath, JSON.stringify(fallback, null, 2), 'utf-8');\n  }\n  return filePath;\n}\n\nexport async function readStore<T>(fileName: string, fallback: T): Promise<T> {\n  const filePath = await ensureFile(fileName, fallback);\n  const raw = await fs.readFile(filePath, 'utf-8');\n  return JSON.parse(raw) as T;\n}\n\nexport async function writeStore<T>(fileName: string, data: T) {\n  const filePath = await ensureFile(fileName, data);\n  await fs.writeFile(filePath, JSON.stringify(data, null, 2), 'utf-8');\n}\n","import Link from 'next/link';\nimport { readStore } from '../_lib/storage';\nimport type { Alert, Notification, Preferences, Watchlist } from '../_lib/types';\n\nexport default async function DashboardPage() {\n  const watchlists = await readStore<{ items: Watchlist[] }>('watchlists.json', { items: [] });\n  const alerts = await readStore<{ items: Alert[] }>('alerts.json', { items: [] });\n  const notifications = await readStore<{ items: Notification[] }>('notifications.json', {\n    items: [],\n  });\n  const preferences = await readStore<Preferences>('preferences.json', {\n    theme: 'system',\n    currency: 'USD',\n    notifications: { email: true, inApp: true },\n  });\n\n  return (\n    <div className=\"grid gap-6\">\n      <section className=\"rounded-lg border border-slate-200 bg-white p-6 shadow-sm\">\n        <h2 className=\"text-lg font-semibold\">Portfolio overview</h2>\n        <div className=\"mt-4 grid gap-4 md:grid-cols-3\">\n          <div className=\"rounded-lg border border-slate-200 bg-slate-50 p-4\">\n            <div className=\"text-sm text-slate-600\">Watchlists</div>\n            <div className=\"text-2xl font-semibold\">{watchlists.items.length}</div>\n          </div>\n          <div className=\"rounded-lg border border-slate-200 bg-slate-50 p-4\">\n            <div className=\"text-sm text-slate-600\">Active alerts</div>\n            <div className=\"text-2xl font-semibold\">\n              {alerts.items.filter((alert) => alert.status === 'active').length}\n            </div>\n          </div>\n          <div className=\"rounded-lg border border-slate-200 bg-slate-50 p-4\">\n            <div className=\"text-sm text-slate-600\">Unread notifications</div>\n            <div className=\"text-2xl font-semibold\">\n              {notifications.items.filter((note) => !note.read).length}\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <section className=\"rounded-lg border border-slate-200 bg-white p-6 shadow-sm\">\n        <h2 className=\"text-lg font-semibold\">Preferences</h2>\n        <div className=\"mt-2 text-sm text-slate-600\">\n          Theme: {preferences.theme} ï¿½ Currency: {preferences.currency}\n        </div>\n        <Link className=\"mt-3 inline-flex text-sm font-medium\" href=\"/app/preferences\">\n          Update preferences\n        </Link>\n      </section>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}