{"version":3,"sources":["../../../../app/_lib/storage.ts","../../../../app/app/alerts/history/page.tsx"],"sourcesContent":["import { promises as fs } from 'fs';\nimport path from 'path';\n\nfunction getDataDir() {\n  return process.env.MP_DATA_DIR ?? path.join(process.cwd(), 'data');\n}\n\nasync function ensureDir() {\n  await fs.mkdir(getDataDir(), { recursive: true });\n}\n\nasync function ensureFile<T>(fileName: string, fallback: T) {\n  await ensureDir();\n  const filePath = path.join(getDataDir(), fileName);\n  try {\n    await fs.access(filePath);\n  } catch {\n    await fs.writeFile(filePath, JSON.stringify(fallback, null, 2), 'utf-8');\n  }\n  return filePath;\n}\n\nexport async function readStore<T>(fileName: string, fallback: T): Promise<T> {\n  const filePath = await ensureFile(fileName, fallback);\n  const raw = await fs.readFile(filePath, 'utf-8');\n  return JSON.parse(raw) as T;\n}\n\nexport async function writeStore<T>(fileName: string, data: T) {\n  const filePath = await ensureFile(fileName, data);\n  await fs.writeFile(filePath, JSON.stringify(data, null, 2), 'utf-8');\n}\n","import { readStore } from '../../../_lib/storage';\nimport type { Alert } from '../../../_lib/types';\n\nexport default async function AlertsHistoryPage() {\n  const alertsStore = await readStore<{ items: Alert[] }>('alerts.json', { items: [] });\n\n  return (\n    <section className=\"rounded-lg border border-slate-200 bg-white p-6 shadow-sm\">\n      <h2 className=\"text-lg font-semibold\">Alert history</h2>\n      {alertsStore.items.length === 0 ? (\n        <p className=\"mt-3 text-sm text-slate-600\">No alerts created yet.</p>\n      ) : (\n        <table className=\"mt-4 w-full border-collapse text-sm\">\n          <thead>\n            <tr className=\"text-left text-slate-600\">\n              <th className=\"pb-2\">Symbol</th>\n              <th className=\"pb-2\">Threshold</th>\n              <th className=\"pb-2\">Schedule</th>\n              <th className=\"pb-2\">Status</th>\n            </tr>\n          </thead>\n          <tbody>\n            {alertsStore.items.map((alert) => (\n              <tr key={alert.id} className=\"border-t border-slate-100\">\n                <td className=\"py-2\">{alert.symbol}</td>\n                <td className=\"py-2\">\n                  {alert.direction} {alert.threshold}\n                </td>\n                <td className=\"py-2\">{alert.schedule}</td>\n                <td className=\"py-2 capitalize\">{alert.status}</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      )}\n    </section>\n  );\n}\n"],"names":[],"mappings":"8FAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEA,SAAS,IACP,OAAO,QAAQ,GAAG,CAAC,WAAW,EAAI,EAAA,OAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,GAAI,OAC7D,CAEA,eAAe,IACb,MAAM,EAAA,QAAE,CAAC,KAAK,CAAC,IAAc,CAAE,WAAW,CAAK,EACjD,CAEA,eAAe,EAAc,CAAgB,CAAE,CAAW,EACxD,MAAM,IACN,IAAM,EAAW,EAAA,OAAI,CAAC,IAAI,CAAC,IAAc,GACzC,GAAI,CACF,MAAM,EAAA,QAAE,CAAC,MAAM,CAAC,EAClB,CAAE,KAAM,CACN,MAAM,EAAA,QAAE,CAAC,SAAS,CAAC,EAAU,KAAK,SAAS,CAAC,EAAU,KAAM,GAAI,QAClE,CACA,OAAO,CACT,CAEO,eAAe,EAAa,CAAgB,CAAE,CAAW,EAC9D,IAAM,EAAW,MAAM,EAAW,EAAU,GAE5C,OAAO,KAAK,KAAK,CADL,AACM,MADA,EAAA,QAAE,CAAC,QAAQ,CAAC,EAAU,SAE1C,CAEO,eAAe,EAAc,CAAgB,CAAE,CAAO,EAC3D,IAAM,EAAW,MAAM,EAAW,EAAU,EAC5C,OAAM,EAAA,QAAE,CAAC,SAAS,CAAC,EAAU,KAAK,SAAS,CAAC,EAAM,KAAM,GAAI,QAC9D,8YC/BA,EAAA,EAAA,CAAA,CAAA,OAGe,eAAe,IAC5B,IAAM,EAAc,MAAM,CAAA,EAAA,EAAA,SAAA,AAAS,EAAqB,cAAe,CAAE,MAAO,EAAE,AAAC,GAEnF,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,UAAA,CAAQ,UAAU,sEACjB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAwB,kBACR,IAA7B,EAAY,KAAK,CAAC,MAAM,CACvB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uCAA8B,2BAE3C,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,gDACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,qCACZ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gBAAO,WACrB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gBAAO,cACrB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gBAAO,aACrB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gBAAO,gBAGzB,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACE,EAAY,KAAK,CAAC,GAAG,CAAE,AAAD,GACrB,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAkB,UAAU,sCAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gBAAQ,EAAM,MAAM,GAClC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,iBACX,EAAM,SAAS,CAAC,IAAE,EAAM,SAAS,IAEpC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gBAAQ,EAAM,QAAQ,GACpC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,2BAAmB,EAAM,MAAM,KANtC,EAAM,EAAE,UAc/B"}