{"version":3,"sources":["../../../../app/_lib/storage.ts","../../../../app/_lib/ids.ts","../../../../app/_actions/watchlists.ts","../../../../.next-internal/server/app/app/watchlists/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["import { promises as fs } from 'fs';\nimport path from 'path';\n\nfunction getDataDir() {\n  return process.env.MP_DATA_DIR ?? path.join(process.cwd(), 'data');\n}\n\nasync function ensureDir() {\n  await fs.mkdir(getDataDir(), { recursive: true });\n}\n\nasync function ensureFile<T>(fileName: string, fallback: T) {\n  await ensureDir();\n  const filePath = path.join(getDataDir(), fileName);\n  try {\n    await fs.access(filePath);\n  } catch {\n    await fs.writeFile(filePath, JSON.stringify(fallback, null, 2), 'utf-8');\n  }\n  return filePath;\n}\n\nexport async function readStore<T>(fileName: string, fallback: T): Promise<T> {\n  const filePath = await ensureFile(fileName, fallback);\n  const raw = await fs.readFile(filePath, 'utf-8');\n  return JSON.parse(raw) as T;\n}\n\nexport async function writeStore<T>(fileName: string, data: T) {\n  const filePath = await ensureFile(fileName, data);\n  await fs.writeFile(filePath, JSON.stringify(data, null, 2), 'utf-8');\n}\n","export function createId() {\n  if (typeof crypto !== 'undefined' && 'randomUUID' in crypto) {\n    return crypto.randomUUID();\n  }\n  return `${Date.now()}-${Math.random().toString(16).slice(2)}`;\n}\n","'use server';\n\nimport { revalidatePath } from 'next/cache';\nimport { createId } from '../_lib/ids';\nimport { readStore, writeStore } from '../_lib/storage';\nimport type { Watchlist } from '../_lib/types';\n\nconst storeFile = 'watchlists.json';\n\nexport async function createWatchlist(formData: FormData) {\n  const name = String(formData.get('name') ?? '').trim();\n  const symbolsRaw = String(formData.get('symbols') ?? '').trim();\n\n  if (!name) {\n    return;\n  }\n\n  const symbols = symbolsRaw\n    .split(',')\n    .map((symbol) => symbol.trim().toUpperCase())\n    .filter(Boolean);\n\n  const store = await readStore<{ items: Watchlist[] }>(storeFile, { items: [] });\n  store.items.unshift({\n    id: createId(),\n    name,\n    symbols,\n    createdAt: new Date().toISOString(),\n  });\n\n  await writeStore(storeFile, store);\n  revalidatePath('/app/watchlists');\n  revalidatePath('/app');\n}\n","export {createWatchlist as '4041f926c8a4c69fbaa2352a2a5cfcd14ed15b6ecf'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":"8FAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEA,SAAS,IACP,OAAO,QAAQ,GAAG,CAAC,WAAW,EAAI,EAAA,OAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,GAAI,OAC7D,CAEA,eAAe,IACb,MAAM,EAAA,QAAE,CAAC,KAAK,CAAC,IAAc,CAAE,WAAW,CAAK,EACjD,CAEA,eAAe,EAAc,CAAgB,CAAE,CAAW,EACxD,MAAM,IACN,IAAM,EAAW,EAAA,OAAI,CAAC,IAAI,CAAC,IAAc,GACzC,GAAI,CACF,MAAM,EAAA,QAAE,CAAC,MAAM,CAAC,EAClB,CAAE,KAAM,CACN,MAAM,EAAA,QAAE,CAAC,SAAS,CAAC,EAAU,KAAK,SAAS,CAAC,EAAU,KAAM,GAAI,QAClE,CACA,OAAO,CACT,CAEO,eAAe,EAAa,CAAgB,CAAE,CAAW,EAC9D,IAAM,EAAW,MAAM,EAAW,EAAU,GAE5C,OAAO,KAAK,KAAK,CADL,AACM,MADA,EAAA,QAAE,CAAC,QAAQ,CAAC,EAAU,SAE1C,CAEO,eAAe,EAAc,CAAgB,CAAE,CAAO,EAC3D,IAAM,EAAW,MAAM,EAAW,EAAU,EAC5C,OAAM,EAAA,QAAE,CAAC,SAAS,CAAC,EAAU,KAAK,SAAS,CAAC,EAAM,KAAM,GAAI,QAC9D,qEC/BO,SAAS,UACd,AAAI,AAAkB,WAAX,QAA0B,eAAgB,OAC5C,CADoD,MAC7C,UAAU,GAEnB,CAAA,EAAG,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,KAAK,CAAC,GAAA,CAAI,AAC/D,kECHA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,oBAGA,IAAM,EAAY,kBAEX,eAAe,EAAgB,CAAkB,EACtD,IAAM,EAAO,OAAO,EAAS,GAAG,CAAC,SAAW,IAAI,IAAI,GAC9C,EAAa,OAAO,EAAS,GAAG,CAAC,YAAc,IAAI,IAAI,GAE7D,GAAI,CAAC,EACH,IADS,GAIX,IAAM,EAAU,EACb,KAAK,CAAC,KACN,GAAG,CAAC,AAAC,GAAW,EAAO,IAAI,GAAG,WAAW,IACzC,MAAM,CAAC,SAEJ,EAAQ,MAAM,CAAA,EAAA,EAAA,SAAA,AAAS,EAAyB,EAAW,CAAE,MAAO,EAAE,AAAC,GAC7E,EAAM,KAAK,CAAC,OAAO,CAAC,CAClB,GAAI,CAAA,EAAA,EAAA,QAAA,AAAQ,SACZ,UACA,EACA,UAAW,IAAI,OAAO,WAAW,EACnC,GAEA,MAAM,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAW,GAC5B,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,mBACf,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,OACjB,iCAxBsB,IAAA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA,6DCTtB,IAAA,EAAA,EAAA,CAAA,CAAA"}