module.exports=[22734,(a,b,c)=>{b.exports=a.x("fs",()=>require("fs"))},22091,a=>{"use strict";var b=a.i(22734),c=a.i(14747);function d(){return process.env.MP_DATA_DIR??c.default.join(process.cwd(),"data")}async function e(){await b.promises.mkdir(d(),{recursive:!0})}async function f(a,f){await e();let g=c.default.join(d(),a);try{await b.promises.access(g)}catch{await b.promises.writeFile(g,JSON.stringify(f,null,2),"utf-8")}return g}async function g(a,c){let d=await f(a,c);return JSON.parse(await b.promises.readFile(d,"utf-8"))}async function h(a,c){let d=await f(a,c);await b.promises.writeFile(d,JSON.stringify(c,null,2),"utf-8")}a.s(["readStore",()=>g,"writeStore",()=>h])},93726,a=>{"use strict";function b(){return"u">typeof crypto&&"randomUUID"in crypto?crypto.randomUUID():`${Date.now()}-${Math.random().toString(16).slice(2)}`}a.s(["createId",()=>b])},49919,a=>{"use strict";var b=a.i(37936),c=a.i(18558),d=a.i(93726),e=a.i(22091),f=a.i(13095);let g="alerts.json",h="notifications.json",i="jobs.json";async function j(a){let b=String(a.get("symbol")??"").trim().toUpperCase(),f=Number(a.get("threshold")),j=String(a.get("direction")??"above"),k=String(a.get("schedule")??"realtime");if(!b||Number.isNaN(f))return;let l=await (0,e.readStore)(g,{items:[]}),m={id:(0,d.createId)(),symbol:b,threshold:f,direction:j,schedule:k,status:"active",createdAt:new Date().toISOString()};l.items.unshift(m),await (0,e.writeStore)(g,l);let n=await (0,e.readStore)(h,{items:[]}),o=`Alert set for ${b} ${j} ${f}.`;n.items.unshift({id:(0,d.createId)(),alertId:m.id,channel:"in-app",message:o,createdAt:new Date().toISOString(),read:!1},{id:(0,d.createId)(),alertId:m.id,channel:"email",message:o,createdAt:new Date().toISOString(),read:!1}),await (0,e.writeStore)(h,n);let p=await (0,e.readStore)(i,{items:[]});p.items.unshift({id:(0,d.createId)(),alertId:m.id,runAt:new Date(Date.now()+6e4).toISOString(),status:"queued"}),await (0,e.writeStore)(i,p),(0,c.revalidatePath)("/app/alerts"),(0,c.revalidatePath)("/app/alerts/history"),(0,c.revalidatePath)("/app")}(0,f.ensureServerEntryExports)([j]),(0,b.registerServerReference)(j,"401a1a817d761cb861770a4b502a29efd1d23475e7",null),a.s(["createAlert",()=>j])},29938,a=>{"use strict";var b=a.i(49919);a.s([],74439),a.i(74439),a.s(["401a1a817d761cb861770a4b502a29efd1d23475e7",()=>b.createAlert],29938)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__3470e9ba._.js.map