{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Endava/EndevLocal/Personal/ReactTest%2BCICD/ReactTest/frontend-next/proxy.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport type { NextRequest } from 'next/server';\r\n\r\nexport function proxy(request: NextRequest) {\r\n  const { pathname } = request.nextUrl;\r\n  const country = request.geo?.country ?? 'US';\r\n\r\n  if (pathname.startsWith('/app')) {\r\n    const session = request.cookies.get('session');\r\n    if (!session) {\r\n      const url = request.nextUrl.clone();\r\n      url.pathname = '/';\r\n      url.searchParams.set('redirect', pathname);\r\n      return NextResponse.redirect(url);\r\n    }\r\n  }\r\n\r\n  const response = NextResponse.next();\r\n  response.cookies.set('mp-region', country, { path: '/' });\r\n  if (country === 'US') {\r\n    response.cookies.set('mp-beta', 'true', { path: '/' });\r\n  }\r\n  return response;\r\n}\r\n\r\nexport const config = {\r\n  matcher: ['/app/:path*'],\r\n};\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAGO,SAAS,MAAM,OAAoB;IACxC,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;IACpC,MAAM,UAAU,QAAQ,GAAG,EAAE,WAAW;IAExC,IAAI,SAAS,UAAU,CAAC,SAAS;QAC/B,MAAM,UAAU,QAAQ,OAAO,CAAC,GAAG,CAAC;QACpC,IAAI,CAAC,SAAS;YACZ,MAAM,MAAM,QAAQ,OAAO,CAAC,KAAK;YACjC,IAAI,QAAQ,GAAG;YACf,IAAI,YAAY,CAAC,GAAG,CAAC,YAAY;YACjC,OAAO,8IAAY,CAAC,QAAQ,CAAC;QAC/B;IACF;IAEA,MAAM,WAAW,8IAAY,CAAC,IAAI;IAClC,SAAS,OAAO,CAAC,GAAG,CAAC,aAAa,SAAS;QAAE,MAAM;IAAI;IACvD,IAAI,YAAY,MAAM;QACpB,SAAS,OAAO,CAAC,GAAG,CAAC,WAAW,QAAQ;YAAE,MAAM;QAAI;IACtD;IACA,OAAO;AACT;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;KAAc;AAC1B"}}]
}